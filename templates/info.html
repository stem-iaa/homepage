{% extends "global_profile.html" %}

{% block content %}
    {{ super() }}
    <div class="container-fluid">
        <h1>Course Information</h1>
        <hr>
        <div class="row justify-content-lg-between">
            <div class="col-lg">
                <h2>{{ "Your " if profile_user.discriminator == "student" else "" }}Instructors</h2>
                <ul class="row">
                    {% for instructor in instructors %}
                        <li>{{ card(instructor, user, True) }}</li>
                    {% endfor %}
                </ul>
                <br>

                {% if profile_user.discriminator == "student" %}
                    {% if profile_user.mentors | length > 0 %}
                        <h2>Your Mentor{{ "s" if profile_user.mentors | length > 1 else "" }}</h2>
                        <ul class="row">
                            {% for mentor in profile_user.mentors %}
                                <li>{{ card(mentor, user, True) }}</li>
                            {% endfor %}
                        </ul>
                        <br>
                    {% endif %}
                {% endif %}
            </div>

            <div class="col-auto">
                {% if user.discriminator == "student" %}
                    <div class="card">
                        <div class="card-body">
                            <h4 class="mb-3">Connect to VM</h4>
                            <div class="vm-info" id="vm-polling">
                                <div class="spinner-border">
                                </div>
                            </div>
                            <div class="hidden vm-info" id="vm-off">
                                <p>Your VM is currently <span class="badge badge-danger">stopped</span></p>
                                <a class="btn btn-outline-primary" id="start-vm-button" href="#" role="button">Start
                                    VM</a>
                            </div>
                            <div class="hidden vm-info" id="vm-on">
                                <p>Your VM is currently <span class="badge badge-success">running</span></p>
                                <a class="btn btn-outline-primary mb-2" id="vm-connect-button" href="#" role="button"
                                   target="_blank">Connect
                                    to
                                    VM</a>
                                {% if profile_user.worm_password %}
                                    <br>
                                    <small>VM Password</small>
                                    <input class="form-control form-control-sm" type="text"
                                           value="{{ profile_user.worm_password }}"
                                           readonly>
                                {% endif %}
                            </div>
                            <div class="hidden vm-info" id="vm-error">
                                <div class="alert alert-danger" role="alert" id="vm-alert">
                                </div>
                            </div>
                        </div>
                    </div>
                {% endif %}

                <div class="card">
                    <div class="card-body">
                        <h4 class="mb-3">Hosting</h4>

                        <a href="http://{{ profile_user.username }}.w3.stem-iaa.org">{{ profile_user.username }}.w3.stem-iaa.org</a>
                        <a href="http://{{ profile_user.username }}.flask.stem-iaa.org">{{ profile_user.username }}.flask.stem-iaa.org</a>

                        <p class="mt-3 mb-1">Worm Login</p>
                        <small>Username</small>
                        <input class="form-control form-control-sm" type="text"
                               value="{{ profile_user.username }}" readonly>

                        <small>Password</small>
                        <input class="form-control form-control-sm" type="text"
                               value="{{ profile_user.worm_password }}" readonly>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h4 class="mb-3">Software Downloads</h4>

                        <ul>
                            <li>
                                <a href="https://www.jetbrains.com/pycharm/">PyCharm</a>
                            </li>
                            <li>
                                <a href="https://filezilla-project.org/">FileZilla</a>
                            </li>
                            <li>
                                <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/">PuTTY</a>
                            </li>
                        </ul>
                    </div>
                </div>

                {% if profile_user.cohorts | length > 0 %}
                    <div class="card">
                        <div class="card-body">
                            <h4 class="mb-2">Cohort{{ "s" if profile_user.cohorts | length > 1 else "" }}</h4>

                            <div class="row pl-4">
                                {% for cohort in profile_user.cohorts %}
                                    <a class="w-100" href="/cohort/{{ cohort.id }}" style="font-size: 20px;"><span
                                            class="badge badge-info">{{ cohort.name }}</span></a>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script src="/static/js/info.js"></script>
{% endblock %}
